# PHP練習問題② 説明

## 下記for文の`$i = 0`, `$i <= 4`, `$i++`, `echo $i`がそれぞれ、どの順番で処理されるか、また、何をしているのかを説明してください。

```
for ($i = 0; $i <= 4; $i++) {
    echo $i;
}
```

1. `$i = 0`で初期値が0に定義されて、
2. `$i <= 4`で、`$i`が4以下であることを評価、trueであれば実行、falseであればそこでストップ。
3. `echo $i`が、実際に行われる処理
4. `$i++`で、最後に`$i`に`+1`をして1.に戻る

## for文とforeachはどのように使い分けるのか説明してください。
- 【for文】初期値・範囲・更新値を細かく設定が必要な場合や、配列からインデックス番号を介してバリューを取得したい場合に使用する。範囲の指定が柔軟なため、数列の取得を行う場合もfor文が推奨される。
【foreach文】主に連想配列に対して実行し、`$key => $value`などでキーを基準に実行する。
for文と違い、範囲は配列の中に限られるが、逆に配列全体に反復処理を行いたい場合は、配列を指定するのみで済む。同じ処理をfor文で範囲指定をしようとした場合複雑になるため、その場合はforeachを使用することが推奨される。

## クラスとインスタンスの違いについて説明してください。
- 【クラス】変数の定義(プロパティ)と関数(メソッド)をまとめた処理の塊。あらかじめ一定の処理を定義した、処理の設計図のこと。
【インスタンス】設計図をもとに、実際に形作られた処理の塊。実体化ともいう。実体化されたクラスに引数を渡すことで、処理が進んでいく。

## プロパティとメソッドとはなにか説明してください。
- 【プロパティ】クラスの中で定義された変数のこと。クラスに引数を渡し、引数を関数内で定義することで、関数内専用の変数となる。クラスは基本的にこのプロパティを使って処理を進める。
【メソッド】クラス内で定義された関数のこと。クラスに渡された引数が、プロパティに再定義され、再定義されたプロパティを使用してメソッドにて実際に処理を行っていく、という流れが一般的である。

## コンストラクタとはなにか、また、なぜ必要なのかを説明してください。
- プロパティやメソッドが、引数が渡されたあとで実行されるのに対し、コンストラクタはインスタンス化した時点で実行されるため、プロパティやメソッドが定義する前に、実行しなければいけない骨組みを形成するのに必要である。
頻出する具体例として、渡された引数をプロパティに引数を再定義することで、初めてメソッドで引数を使用することを可能にしたり、
メソッドに初期値を定義する際、設計図の状態では定義ができないため、コンストラクタで定義することが必要となる。


## 下記コンストラクター内の2行が何をしているのか、また、なぜこの2行が必要なのか説明してください。
```
public function __construct($id, $name)
{
    $this->studentId = $id;
    $this->studentName = $name;
}
```
- インスタンス化した時に受け取った引数$id, $nameを、$studentIdと$studentNameのプロパティに代入している。
おそらく、このクラスにプロパティ存在し、後続のメソッドにおいてプロパティを使用しているのかと思われるため、このコンストラクタがないと、そもそもインスタンス化しても処理が行えなくなってしまうため、必要となる。

## クラスがなぜ必要なのか説明してください。
- 主にコードを書く上での、同じ処理を何度も行う場合に、その何度も行う一定の処理のを一つのクラスにまとめて定義し、クラスを呼び出すだけで実行することができる。
コードをその文省略できるため、適切に使用することでコードがすっきりとまとまり、可読性が向上するので適宜必要となる。

## `DateTime::modify`メソッドの返り値を教えてください。
- `DateTime::modify`は、DateTimeクラスに使用するメソッドで、DateTimeで定義されたタイムスタンプを変更することができる。
この場合、戻り値は「変更されたタイムスタンプ」になる。

## `DateTime::format`メソッドと`DateInterval::format`メソッドの違いを教えてください。
- DateTime::formatは、指定した形式のタイムスタンプを定義するためのメソッドで
DateInterval::formatは、あるタイムスタンプからの差を、指定した形式で取得するためのメソッドのこと。

## 下記コード3行目のformatメソッドの返り値をPHPのマニュアルから調べる手順を具体的に説明してください。
```
$now = new DateTime();
$prev = new DateTime('2000-1-1');
echo $prev->diff($now)->format('%a')
```

- 1.まず、`echo`文の右の内容を見ます。これは、`$prev ->diff($now)`で`$prev`と`$now`の差を表し、それを引数としてメソッドチェーンで連鎖させた`format('%a')`に渡している。
つまり、`echo`の右は、`$prev`と`$now`の差を、`('%a')`というフォーマットで返しているとわかります。
2.1をもとに、日時(DateTime)の差を表すためのPHPマニュアルを検索します。任意の検索エンジンに「DateTime 差 php」と検索します。
3.「DateTimeInterface::diff」のPHPマニュアルが出るので、サイトを開き説明を確認します。
4.「ふたつの DateTime オブジェクトの差を返す」とあるので、間違いなさそうです。次に、戻り値を確認します。
5.「ふたつの日付の差をあらわす DateInterval オブジェクトを返します。」とありますが、DateIntervalオブジェクトがわかりません。ちょうどハイライトされてリンクとなっているので、飛んでみます。
6.「DateInterval」のページが開きました。はじめにを見ると「日付の間隔をあらわします。」とあるので、DateIntervalは、「日付の間隔(差)を表すオブジェクト」とわかりました。
7.ですが、まだ`format('%a')`のフォーマットがわかりません。つぎに、検索エンジンで「DateInterval format php」と検索します。
8.「DateInterval::format」というPHPマニュアルが出ました。説明には、「間隔をフォーマットする」とあるので、日付の差を任意のフォーマット型にフォーマットするようです。
9.戻り値をみます。「フォーマットされた間隔を返します。」とあります。どんなフォーマットがあるのでしょうか。
10.同ページのパラメータ欄に「format」の説明があります。まず「次の文字を、 format パラメータ文字列に使用することができます。 フォーマット文字は、パーセント記号 (%) で始めなければなりません。」
とあるので、`format('%a')`の%は接頭詞であるとわかります.
11.では次にaを探します。「format文字」一覧の中にaがありました。説明をみます。「DateTime::diff() の結果に使った場合は総日数、それ以外の場合は (unknown)」と書いてありました。
今回はDateTime::diffの形で使っているので、「総日数」を表すフォーマットのようです。つまり、`format('%a')`は、二つのDateTimeの差を、総日数のフォーマットで返すようです。

【結論】
formatメソッドは、`$prev`と`$now`の差を、`format('%a')`というフォーマット、つまり差の総日数を戻り値として返す。

…と言いたいところだが、最後に;(セミコロン)がないため、実行しても戻り値どころかエラーが返ってくる。(初心者あるある。僕もよくやります。あぶない)
